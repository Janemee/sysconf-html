(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2,4],{"713b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"bg-primary text-white ",attrs:{elevated:"","height-hint":"98"}},[a("q-toolbar",[a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:function(e){t.drawer=!t.drawer}}}),a("q-toolbar-title",[a("q-avatar"),t._v("\n        Title Demo\n      ")],1)],1),a("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"accent",size:"10px","skip-hijack":""}}),a("q-tabs",{attrs:{align:"center"}},t._l(t.tabList,(function(e){return a("q-tab",{key:e,attrs:{label:e},on:{click:function(a){t.trigger(t.loadMenu(e))}}})})),1)],1),a("q-drawer",{attrs:{"show-if-above":"",width:200,breakpoint:500,bordered:"","content-class":"bg-grey-3"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("q-scroll-area",{staticClass:"fit"},t._l(t.menuList,(function(e,n){return a("q-list",{key:n},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:e.label===t.group},on:{click:function(a){return t.loadMenuData(e.label)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:e.icon}})],1),a("q-item-section",[t._v("\n            "+t._s(e.label)+"\n          ")])],1),e.separator?a("q-separator"):t._e()],1)})),1)],1),a("q-page-container",[a("Index",{attrs:{group:t.group,app:t.app}})],1)],1)},s=[],i=a("8b24");const o="http://localhost:8082";var r={components:{Index:i["default"]},data(){return{drawer:!1,menuList:[],menuListMap:{},tabList:[],app:"",group:""}},methods:{trigger(t){const e=this.$refs.bar;e.start(),"function"===typeof t&&t(),this.$refs.bar&&this.$refs.bar.stop()},loadMenuData(t){this.group=t},loadMenu(t){this.app=t,this.menuList=this.menuListMap[t],this.trigger(this.$axios.get(o+"/api/menu",{params:{app:this.app}}).then(t=>{console.log(t),this.menuList=t.data}).catch(()=>{})),void 0!==this.menuList&&this.menuList.length>0?this.loadMenuData(this.menuList[0].label):(this.menuList=[],this.loadMenuData(""))}},mounted:function(){this.trigger(this.$axios.get(o+"/api/app").then(t=>{this.tabList=t.data,null!=this.tabList&&(this.app=this.tabList[0])}).catch(()=>{})),this.trigger(this.$axios.get(o+"/api/menuMap",{params:{app:this.app}}).then(t=>{console.log(t),this.menuListMap=t.data}).catch(()=>{}))}},l=r,c=a("2877"),p=a("4d5a"),u=a("e359"),d=a("65c6"),h=a("9c40"),g=a("6ac5"),f=a("cb32"),b=a("27f9"),m=a("7ea5"),v=a("429b"),k=a("7460"),w=a("9404"),y=a("4983"),q=a("1c1c"),x=a("66e5"),Q=a("4074"),_=a("0016"),L=a("eb85"),D=a("09e3"),$=a("7ff0"),S=a("714f"),M=a("eebe"),I=a.n(M),P=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=P.exports;I()(P,"components",{QLayout:p["a"],QHeader:u["a"],QToolbar:d["a"],QBtn:h["a"],QToolbarTitle:g["a"],QAvatar:f["a"],QInput:b["a"],QAjaxBar:m["a"],QTabs:v["a"],QTab:k["a"],QDrawer:w["a"],QScrollArea:y["a"],QList:q["a"],QItem:x["a"],QItemSection:Q["a"],QIcon:_["a"],QSeparator:L["a"],QPageContainer:D["a"],QFooter:$["a"]}),I()(P,"directives",{Ripple:S["a"]})},"8b24":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"key",pagination:t.pagination,loading:t.loading,filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",[a("q-btn",{attrs:{size:"sm",color:"accent",round:"",dense:"",icon:e.expand?"remove":"add"},on:{click:function(t){e.expand=!e.expand}}})],1),a("q-td",{key:"des",attrs:{props:e}},[t._v("\n          "+t._s(e.row.des)+"\n        ")]),a("q-td",{key:"key",attrs:{props:e}},[t._v("\n          "+t._s(e.row.key)+"\n          ")]),a("q-td",{key:"value",attrs:{props:e}},[t._v("\n          "+t._s(e.row.value)+"\n          "),a("q-popup-edit",{attrs:{validate:function(t){return t.length>0}},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.initialValue,i=n.value,o=n.emitValue,r=n.validate,l=n.set,c=n.cancel;return[a("q-input",{attrs:{type:"textarea",autofocus:"",dense:"",hint:"填写value",rules:[function(t){return r(i)||"More than 5 chars required"}]},on:{input:o},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel",label:"取消"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",label:"保存",disable:!1===r(i)||s===i},on:{click:[function(a){return t.setInput(e.row)},function(t){return t.stopPropagation(),l(t)}]}})]},proxy:!0}],null,!0),model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"props.row.value"}})]}}],null,!0),model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"props.row.value"}})],1),a("q-td",{key:"valueDes",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap"},[t._v(t._s(e.row.valueDes))])])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"text-left"},[t._v("This is expand slot for row above: "+t._s(e.row.des)+".")])])],1)]}}])})],1)},s=[];a("fb6a"),a("4e82"),a("a434"),a("ddb0");const i="http://localhost:8082";var o={props:{group:String,app:String},watch:{app(){""===this.group?this.data=[]:this.loadData()},group(){""===this.group?this.data=[]:this.loadData()}},data(){return{filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:5},columns:[{name:"expand",label:""},{name:"des",required:!0,label:"字段名称",align:"left"},{name:"key",align:"center",label:"key",field:"key",sortable:!0},{name:"value",label:"value",field:"value",sortable:!1},{name:"valueDes",label:"valueDes",field:"valueDes",sortable:!1}],data:[],original:[]}},mounted(){},methods:{setInput(t){this.$axios.post(i+"/api/setData",t).then(t=>{console.log(t.data)}).catch(()=>{}),this.$q.notify({message:"修改成功",icon:"check_circle",color:"purple",position:"top"}),console.log(t)},loadData(){this.$axios.get(i+"/api/data",{params:{app:this.app,group:this.group}}).then(t=>{console.log(t.data),this.original=t.data,this.onRequest()}).catch(()=>{})},onRequest(t){const{page:e,rowsPerPage:a,sortBy:n,descending:s}=this.pagination;var i="";void 0!==t&&null!==t&&(i=t.filter),this.loading=!0,this.pagination.rowsNumber=this.getRowsNumberCount(i);const o=0===a?this.pagination.rowsNumber:a,r=(e-1)*a,l=this.fetchFromServer(r,o,i,n,s);this.data.splice(0,this.data.length,...l),this.pagination.page=e,this.pagination.rowsPerPage=a,this.pagination.sortBy=n,this.pagination.descending=s,this.loading=!1},fetchFromServer(t,e,a,n,s){const i=a?this.original.filter(t=>t.key.includes(a)):this.original.slice();if(n){this.descending=!this.descending;const t="desc"===n?this.descending?(t,e)=>t.key>e.key?-1:t.key<e.key?1:0:(t,e)=>t.key>e.key?1:t.key<e.key?-1:0:this.descending?(t,e)=>parseFloat(e[n])-parseFloat(t[n]):(t,e)=>parseFloat(t[n])-parseFloat(e[n]);i.sort(t)}return i.slice(t,t+e)},getRowsNumberCount(t){if(!t)return this.original.length;let e=0;return this.original.forEach(a=>{a.key.includes(t)&&++e}),e}}},r=o,l=a("2877"),c=a("eaac"),p=a("27f9"),u=a("0016"),d=a("bd08"),h=a("db86"),g=a("9c40"),f=a("42a1"),b=a("eebe"),m=a.n(b),v=Object(l["a"])(r,n,s,!1,null,null,null);e["default"]=v.exports;m()(v,"components",{QTable:c["a"],QInput:p["a"],QIcon:u["a"],QTr:d["a"],QTd:h["a"],QBtn:g["a"],QPopupEdit:f["a"]})}}]);