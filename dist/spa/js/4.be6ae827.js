(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"key",pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":""},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",[a("q-btn",{attrs:{size:"sm",color:"accent",round:"",dense:"",icon:t.expand?"remove":"add"},on:{click:function(e){t.expand=!t.expand}}})],1),a("q-td",{key:"des",attrs:{props:t}},[e._v("\n          "+e._s(t.row.des)+"\n        ")]),a("q-td",{key:"key",attrs:{props:t}},[e._v("\n          "+e._s(t.row.key)+"\n          ")]),a("q-td",{key:"value",attrs:{props:t}},[e._v("\n          "+e._s(t.row.value)+"\n          "),a("q-popup-edit",{attrs:{validate:function(e){return e.length>0}},scopedSlots:e._u([{key:"default",fn:function(n){var o=n.initialValue,s=n.value,i=n.emitValue,r=n.validate,l=n.set,p=n.cancel;return[a("q-input",{attrs:{type:"textarea",autofocus:"",dense:"",hint:"填写value",rules:[function(e){return r(s)||"More than 5 chars required"}]},on:{input:i},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel",label:"取消"},on:{click:function(e){return e.stopPropagation(),p(e)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",label:"保存",disable:!1===r(s)||o===s},on:{click:[function(a){return e.setInput(t.row)},function(e){return e.stopPropagation(),l(e)}]}})]},proxy:!0}],null,!0),model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"props.row.value"}})]}}],null,!0),model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"props.row.value"}})],1),a("q-td",{key:"valueDes",attrs:{props:t}},[a("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.valueDes))])])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"text-left"},[e._v("This is expand slot for row above: "+e._s(t.row.des)+".")])])],1)]}}])})],1)},o=[];a("fb6a"),a("4e82"),a("a434"),a("ddb0");const s="http://localhost:8082";var i={props:{group:String,app:String},watch:{app(){""===this.group?this.data=[]:this.loadData()},group(){""===this.group?this.data=[]:this.loadData()}},data(){return{filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:5},columns:[{name:"expand",label:""},{name:"des",required:!0,label:"字段名称",align:"left"},{name:"key",align:"center",label:"key",field:"key",sortable:!0},{name:"value",label:"value",field:"value",sortable:!1},{name:"valueDes",label:"valueDes",field:"valueDes",sortable:!1}],data:[],original:[]}},mounted(){},methods:{setInput(e){this.$axios.post(s+"/api/setData",e).then(e=>{console.log(e.data)}).catch(()=>{}),this.$q.notify({message:"修改成功",icon:"check_circle",color:"purple",position:"top"}),console.log(e)},loadData(){this.$axios.get(s+"/api/data",{params:{app:this.app,group:this.group}}).then(e=>{console.log(e.data),this.original=e.data,this.onRequest()}).catch(()=>{})},onRequest(e){const{page:t,rowsPerPage:a,sortBy:n,descending:o}=this.pagination;var s="";void 0!==e&&null!==e&&(s=e.filter),this.loading=!0,this.pagination.rowsNumber=this.getRowsNumberCount(s);const i=0===a?this.pagination.rowsNumber:a,r=(t-1)*a,l=this.fetchFromServer(r,i,s,n,o);this.data.splice(0,this.data.length,...l),this.pagination.page=t,this.pagination.rowsPerPage=a,this.pagination.sortBy=n,this.pagination.descending=o,this.loading=!1},fetchFromServer(e,t,a,n,o){const s=a?this.original.filter(e=>e.key.includes(a)):this.original.slice();if(n){this.descending=!this.descending;const e="desc"===n?this.descending?(e,t)=>e.key>t.key?-1:e.key<t.key?1:0:(e,t)=>e.key>t.key?1:e.key<t.key?-1:0:this.descending?(e,t)=>parseFloat(t[n])-parseFloat(e[n]):(e,t)=>parseFloat(e[n])-parseFloat(t[n]);s.sort(e)}return s.slice(e,e+t)},getRowsNumberCount(e){if(!e)return this.original.length;let t=0;return this.original.forEach(a=>{a.key.includes(e)&&++t}),t}}},r=i,l=a("2877"),p=a("eaac"),c=a("27f9"),u=a("0016"),d=a("bd08"),h=a("db86"),g=a("9c40"),f=a("42a1"),v=a("eebe"),b=a.n(v),k=Object(l["a"])(r,n,o,!1,null,null,null);t["default"]=k.exports;b()(k,"components",{QTable:p["a"],QInput:c["a"],QIcon:u["a"],QTr:d["a"],QTd:h["a"],QBtn:g["a"],QPopupEdit:f["a"]})}}]);